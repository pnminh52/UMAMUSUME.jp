import React, { useEffect, useState } from "react";
import { useNavigate, useLocation } from "react-router-dom";
import { Link } from "react-router-dom";

const Header = () => {
    const location = useLocation();
    const [showPopup, setShowPopup] = useState(false);
    const navigate = useNavigate();
    const umaSvg = (
        <svg
            className="w-3 h-3 rotate-40"
            fill="white"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 108 112"
            preserveAspectRatio="xMidYMid meet"
            data-v-cd0e3d1e=""
            data-v-7e1c1a78=""
        >
            <path d="M100.7 94.6c-2.4-2.1-7-3.9-4.4-7.8 18.8-27.1 10.9-70.4-22.4-81.6C67.5 2.9 60.7 1.8 54 1.8S40.4 3 34.1 5.2C.7 16.5-7.1 59.8 11.7 86.8c2.6 3.8-2 5.7-4.4 7.8-1.6 1.3-1.8 3.5-.5 5 2.8 3.2 5.7 6.4 8.6 9.5 1.4 1.7 3.6 1.2 5.1 0 7.1-4.7 14.1-9.4 21.2-14.1.8-.5 1.3-1.2 1.5-2.1.3-1.3 0-2.4-1.1-3.3-3.1-2.9-5.5-6.2-7.3-10.1-3.9-8.8-5-20.5-2-29.7 3.1-9.9 11.8-15.3 21.2-15.3s18.1 5.4 21.2 15.3c2.9 9.2 1.9 20.9-2 29.7-1.8 3.8-4.2 7.2-7.3 10.1-1 .9-1.4 2-1.1 3.3.2.9.7 1.6 1.5 2.1 7.1 4.7 14.1 9.4 21.2 14.1 1.5 1.2 3.7 1.6 5.1 0 2.9-3.2 5.7-6.3 8.6-9.5 1.4-1.5 1.1-3.7-.5-5"></path>
        </svg>
    );
    const menuItems = [
        { label: "News", path: "/news" },
        { label: "About", path: "/about" },
        { label: "Contents", path: "/contents" },
        { label: "Character", path: "/character" },
        { label: "Special", path: "/special" },
        { label: "Goods", path: "/goods" },
        { label: "Webstore", path: "/webstore" },
    ];
    useEffect(() => {
        if (showPopup) {
            document.body.style.overflow = "hidden";
        } else {
            document.body.style.overflow = "";
        }
        return () => {
            document.body.style.overflow = "";
        };
    }, [showPopup]);
    return (
        <div>
            <div className="block sm:hidden">
                {/* Thanh header */}
                <div className="h-18 bg-[#0F5AFF]    flex justify-between px-4 items-center">
                    {/* Logo */}

                    <svg
                        onClick={() => {
                            navigate("/");
                            setShowPopup(false);
                        }}
                        className="w-36 h-auto fill-white"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 510.24 110.71"
                        preserveAspectRatio="xMidYMid meet"
                    >
                        <path d="M48.14.37h-9.26V31.4c0 5.52-6.63 9.99-14.8 9.99s-14.8-4.47-14.8-9.99V.37H0V33.3c0 8.8 10.78 15.94 24.07 15.94S48.14 42.1 48.14 33.3zM288.54.37h-9.26V31.4c0 5.52-6.63 9.99-14.8 9.99s-14.8-4.47-14.8-9.99V.37h-9.27V33.3c0 8.8 10.78 15.94 24.07 15.94s24.07-7.14 24.07-15.94V.37ZM395.89.37h-9.26V31.4c0 5.52-6.63 9.99-14.8 9.99s-14.8-4.47-14.8-9.99V.37h-9.27V33.3c0 8.8 10.78 15.94 24.07 15.94S395.9 42.1 395.9 33.3V.37ZM337.06 23.96c-5.15-4.22-13.6-4.96-21.66-5.46-6.84-.41-10.26-1.9-10.26-4.44 0-1.75 1.07-3.17 3.2-4.27 5.52-2.73 14.38-1.85 20.21.9l7.65 3.48 3.92-7.5-4.28-2.05c-11.56-5.34-25.31-6.81-34.87-.25-7.01 4.46-8.45 15.52-1.89 20.57 4.34 3.56 12.51 4.24 19.75 4.44 8 .36 12 2.04 12 5.07 0 1.84-1.18 3.37-3.55 4.6-6.86 3.37-17.4 1.86-24.29-1.6l-4.72-2.36-3.6 8.01c7.2 3.67 15.01 6.3 23.14 6.15 6.99 0 12.71-1.5 17.15-4.49 7.82-4.78 9.1-15.27 2.11-20.79ZM97.75.42l-15.1 28.4L67.55.42H54.94v48.14h9.29V13.91l18.42 33.16 18.43-33.16v34.65h9.28V.42zM220.99.42l-15.1 28.4-15.1-28.4h-12.6v48.14h9.28V13.91l18.42 33.16 18.43-33.16v34.65h9.28V.42zM445.51.42l-15.1 28.4-15.1-28.4H402.7v48.14h9.28V13.91l18.43 33.16 18.42-33.16v34.65h9.28V.42zM147.52.43h-6.4l-25.6 48.13h10.5l6.34-11.9h23.93l6.34 11.9h10.5zm-11.47 29.28 8.27-15.56 8.27 15.56zM474.19 39.3V26.93l24.49.01v-6.96l-24.49.01V9.7h35.51V.42h-44.78v48.14l45.32.01v-9.28zM131.37 60.8c-15.34 0-27.78 11.17-27.78 24.96s12.44 24.96 27.78 24.96 27.78-11.17 27.78-24.96-12.44-24.96-27.78-24.96m0 40.87c-9.7 0-17.57-7.28-17.57-16.27s7.87-16.27 17.57-16.27 17.57 7.28 17.57 16.27-7.87 16.27-17.57 16.27M214.58 100.55V88.19h24.49v-6.96l-24.49.01V70.96h35.52v-9.29l-44.79.01v48.14h45.32v-9.28zM33.73 61.69H0v48.13h9.27V88.19h24.46c7.31-.01 13.24-5.94 13.24-13.26s-5.93-13.24-13.24-13.24m.3 19.55H9.27V70.96h24.46c2.85 0 5.16 2.31 5.16 5.16s-2.15 4.97-4.86 5.13ZM99.64 74.93c0-7.31-5.93-13.24-13.24-13.24H52.67v48.13h9.27V88.19H77.6l11.51 21.63h10.5L88.03 88.06c6.53-.81 11.59-6.37 11.59-13.13Zm-37.69 6.31V70.96h24.43c2.85 0 5.16 2.31 5.16 5.16s-2.15 4.97-4.86 5.13H61.95ZM357.67 61.69h-48.04v9.26h19.39l-.01 38.87h9.28V70.95h19.38zM283.79 101.45c-10.88 0-19.7-7.18-19.7-16.05s8.82-16.05 19.7-16.05c5.56 0 10.57 1.88 14.15 4.9l6.8-6.68c-5.54-3.99-12.87-6.44-20.95-6.44-17.2 0-31.15 11.02-31.15 24.62s13.95 24.62 31.15 24.62c8.08 0 15.42-2.45 20.95-6.44l-7.19-7.06c-3.55 2.83-8.41 4.58-13.77 4.58ZM198 61.62h-9.26v31.03c0 5.52-6.63 9.99-14.8 9.99-5.04 0-9.43-1.34-12.55-3.56l-3.8 7.14c4.29 2.64 10.03 4.26 16.35 4.26 13.29 0 24.07-7.14 24.07-15.94V61.61Z"></path>
                    </svg>

                    <div
                        className="flex cursor-pointer flex-col items-center justify-center"
                        onClick={() => setShowPopup(!showPopup)}
                    >
                        <svg
                            fill="#fff"
                            className="w-7 h-7"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 108 112"
                            preserveAspectRatio="xMidYMid meet"
                        >
                            <path d="M100.7 94.6c-2.4-2.1-7-3.9-4.4-7.8 18.8-27.1 10.9-70.4-22.4-81.6C67.5 2.9 60.7 1.8 54 1.8S40.4 3 34.1 5.2C.7 16.5-7.1 59.8 11.7 86.8c2.6 3.8-2 5.7-4.4 7.8-1.6 1.3-1.8 3.5-.5 5 2.8 3.2 5.7 6.4 8.6 9.5 1.4 1.7 3.6 1.2 5.1 0 7.1-4.7 14.1-9.4 21.2-14.1.8-.5 1.3-1.2 1.5-2.1.3-1.3 0-2.4-1.1-3.3-3.1-2.9-5.5-6.2-7.3-10.1-3.9-8.8-5-20.5-2-29.7 3.1-9.9 11.8-15.3 21.2-15.3s18.1 5.4 21.2 15.3c2.9 9.2 1.9 20.9-2 29.7-1.8 3.8-4.2 7.2-7.3 10.1-1 .9-1.4 2-1.1 3.3.2.9.7 1.6 1.5 2.1 7.1 4.7 14.1 9.4 21.2 14.1 1.5 1.2 3.7 1.6 5.1 0 2.9-3.2 5.7-6.3 8.6-9.5 1.4-1.5 1.1-3.7-.5-5" />
                        </svg>
                        {!showPopup ? (
                            <p className="text-xs text-white italic">Menu</p>
                        ) : (
                            <p className="text-xs text-white italic">Close</p>
                        )}
                    </div>
                </div>

                {/* Popup menu */}
                {showPopup && (
                    <div className="fixed  inset-0 z-[999] top-16">
                        <div className="bg-[#0F5AFF] w-full h-full p-4 relative">
                            <ul className="px-4 py-0 mb-8">
                                {menuItems.map((item) => (
                                    <li key={item.label}>
                                        <Link
                                            to={item.path}
                                            onClick={() => setShowPopup(false)}
                                            className="gap-2 text-white text-3xl font-semibold italic border-b h-16 border-white flex items-center"
                                        >
                                            {umaSvg}
                                            {item.label}
                                        </Link>
                                    </li>
                                ))}
                            </ul>
                            <div>
                                <img
                                    src="https://umamusume.jp/_nuxt/images/nav_cygamesid_banner-GYVDatWG.png"
                                    alt="banner"
                                />
                            </div>
                        </div>
                    </div>
                )}
            </div>
            {location.pathname !== "/" && (
                <div className="hidden sm:block">
                    <div className="h-18 bg-[#0F5AFF] px-8 flex justify-between itemd-center ">
                        <svg
                            className="w-70 cursor-pointer hover:opacity-50 transition duration-300 ease-in-out"
                            onClick={()=>navigate("/")}
                            fill="#fff"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 510.24 28.37"
                            preserveAspectRatio="xMidYMid meet"
                            data-v-a8b6fc16=""
                            data-v-7e1c1a78=""
                        >
                            <path d="M27.36.47H22.1v17.64c0 3.14-3.77 5.68-8.41 5.68s-8.41-2.54-8.41-5.68V.47H0v18.72c0 5 6.12 9.06 13.68 9.06s13.68-4.06 13.68-9.06zM163.98.47h-5.26v17.64c0 3.14-3.77 5.68-8.41 5.68s-8.41-2.54-8.41-5.68V.47h-5.27v18.72c0 5 6.12 9.06 13.68 9.06s13.68-4.06 13.68-9.06V.47ZM224.99.47h-5.26v17.64c0 3.14-3.77 5.68-8.41 5.68s-8.41-2.54-8.41-5.68V.47h-5.27v18.72c0 5 6.12 9.06 13.68 9.06S225 24.19 225 19.19V.47ZM191.55 13.88c-2.93-2.4-7.73-2.82-12.31-3.11-3.89-.24-5.83-1.08-5.83-2.53 0-.99.61-1.8 1.82-2.42 3.14-1.55 8.17-1.05 11.48.51l4.35 1.98 2.23-4.26-2.43-1.17c-6.57-3.04-14.38-3.87-19.82-.14-3.98 2.54-4.8 8.82-1.07 11.69 2.47 2.02 7.11 2.41 11.22 2.52 4.55.2 6.82 1.16 6.82 2.88 0 1.04-.67 1.91-2.02 2.61-3.9 1.91-9.89 1.06-13.8-.91l-2.68-1.34-2.05 4.55c4.09 2.08 8.53 3.58 13.15 3.5 3.97 0 7.22-.85 9.75-2.55 4.44-2.72 5.17-8.68 1.2-11.82ZM55.55.5l-8.58 16.14L38.39.5h-7.16v27.36h5.27V8.17l10.47 18.84L57.44 8.17v19.69h5.28V.5zM125.59.5l-8.58 16.14L108.43.5h-7.16v27.36h5.27V8.17l10.47 18.84 10.47-18.84v19.69h5.28V.5zM253.19.5l-8.58 16.14L236.02.5h-7.16v27.36h5.28V8.17l10.47 18.84 10.47-18.84v19.69h5.27V.5zM83.83.51h-3.64L65.64 27.86h5.97l3.6-6.76h13.6l3.6 6.76h5.97zm-6.52 16.64 4.7-8.84 4.7 8.84zM269.49 22.59v-7.02h13.91v-3.95h-13.91V5.77h20.18V.5h-25.45v27.36h25.75v-5.27zM381.63 0c-8.72 0-15.79 6.35-15.79 14.18s7.07 14.18 15.79 14.18 15.79-6.35 15.79-14.18S390.35 0 381.63 0m0 23.23c-5.51 0-9.99-4.14-9.99-9.25s4.47-9.25 9.99-9.25 9.99 4.14 9.99 9.25-4.47 9.25-9.99 9.25M428.91 22.59v-7.02h13.92v-3.95h-13.92V5.77h20.19V.5h-25.45v27.36h25.75v-5.27zM326.14.51h-19.17v27.35h5.27V15.57h13.9c4.16 0 7.52-3.38 7.52-7.53S330.29.52 326.14.52Zm.17 11.11h-14.07V5.78h13.9c1.62 0 2.93 1.31 2.93 2.93s-1.22 2.82-2.76 2.91M363.59 8.03c0-4.16-3.37-7.52-7.52-7.52H336.9v27.35h5.27V15.57h8.9l6.54 12.29h5.97L357 15.49c3.71-.46 6.59-3.62 6.59-7.46m-21.42 3.59V5.78h13.88c1.62 0 2.93 1.31 2.93 2.93s-1.22 2.82-2.76 2.91zM510.24.51h-27.3v5.26h11.01v22.09h5.27V5.77h11.02zM468.25 23.1c-6.18 0-11.2-4.08-11.2-9.12s5.01-9.12 11.2-9.12c3.16 0 6.01 1.07 8.04 2.78l3.87-3.8c-3.15-2.27-7.32-3.66-11.91-3.66-9.78 0-17.7 6.26-17.7 13.99s7.93 13.99 17.7 13.99c4.59 0 8.76-1.39 11.91-3.66l-4.08-4.01c-2.02 1.61-4.78 2.6-7.82 2.6ZM419.49.47h-5.26v17.64c0 3.14-3.77 5.68-8.41 5.68-2.86 0-5.36-.76-7.13-2.02l-2.16 4.06c2.44 1.5 5.7 2.42 9.29 2.42 7.56 0 13.68-4.06 13.68-9.06V.47Z"></path>
                        </svg>
                        <ul className="space-y-2 flex gap-10 items-center">
                            {menuItems.map((item) => (
                                <li key={item.label}>
                                    <Link
                                        to={item.path}
                                        onClick={() => setShowPopup(false)}
                                        className="text-lg italic text-white flex gap-1 items-center font-semibold  "
                                    >
                                        {umaSvg}
                                        {item.label}
                                    </Link>
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>
            )}
        </div>
    );
};

export default Header;
